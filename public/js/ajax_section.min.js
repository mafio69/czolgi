$(document).ready(function(){var a="/admin/dzialy";$(document).on("click","#btn-save",function(a){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),a.preventDefault();var t={nazwa:$("#nazwa").val(),opis:$("#opis").val(),overriding_id:$("#overriding").val()};$("#dzial_id").val();console.log(t),$.ajax({type:"POST",url:"/admin/dzialy",data:t,dataType:"json",success:function(a){console.log(a);var t='<tr id="row-'+a.id+'"><td>'+a.id+"</td><td>"+a.nazwa+"</td><td>"+a.overrding_nazwa+"</td><td>"+a.nazwa+"</td>";t+='<td><button  href="/admin/dzialy/'+a.id+'/edit"  class="btn btn-outline-warning edit-dzial btn-sm" value="'+a.id+'"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>  Edytuj</button></td>',t+='<td><button value="'+a.id+'" href="/admin/dzialy/'+a.id+'" class="btn btn-outline-danger btn-sm delete-dzial"><i class="fa fa-trash-o" aria-hidden="true"></i> Usuń</button></td></tr>',$("#tableSection").append(t),$("#formCreate").trigger("reset"),$("#myModalDodaj").modal("hide")},error:function(a){if(422==a.status){e=jQuery.parseJSON(a.responseText);alert(a),console.log(e);var t='<div class="alert alert-danger"><ul class="list-group">';$.each(e,function(a,e){t+='<li class="list-group-item">'+e[0]+"</li>"}),t+="</ul></di>",$("#form-errors").html(t)}else{var e=jQuery.parseJSON(a.responseText);console.log("Error:",e)}}})}),$(document).on("click",".edit-dzial",function(t){t.preventDefault();var e=$(this).val();$("#opcje").html(""),$.get(a+"/"+e,function(a){$("#frmTasks").attr("action","/artykuly/"+a.id),$("#task_id").val(a.id),$("#nazwaEdit").val(a.nazwa),$("#opisEdit").val(a.opis),$("#section_id").val(e);var t='<select id="overriding_id" class="form-control" name="overriding_id">';a.over.forEach(function(e){t+="<option ",e.id==a.overriding_id&&(t+=" selected "),t+='value="'+e.id+'">'+e.nazwa+"</option>"}),t+="</select>",$("#opcje").append(t),$("#myModalEdit").modal("show")})}),$(document).on("click","#btn-save-edit",function(t){t.preventDefault();var e=$("#section_id").val(),i=a+"/"+e,d={nazwa:$("#nazwaEdit").val(),opis:$("#opisEdit").val(),overriding_id:$("#overriding_id").val(),_token:$("input[name=_token]").val()};$.ajax({type:"PUT",url:i,data:d,dataType:"json",success:function(a){var t='<tr id="row-'+a.id+'"><td>'+a.id+"</td><td>"+a.nazwa+"</td><td>"+a.overrding_nazwa+"</td><td>"+a.opis+"</td>";t+='<td><button  href="/admin/dzialy/'+a.id+'/edit" class="btn btn-outline-warning edit-dzial btn-sm" value="'+a.id+'"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>  Edytuj</button></td>',t+='<td><button value="'+a.id+'" href="/admin/dzialy/'+a.id+'" class="btn btn-outline-danger btn-sm delete-dzial" id="usun"><i class="fa fa-trash-o" aria-hidden="true"></i> Usuń</button></td></tr>',$("#row-"+e).replaceWith(t),$("#formEdit").trigger("reset"),$("#opcje").replaceWith(""),$("#myModalEdit").modal("hide")},error:function(a){if(422==a.status){e=jQuery.parseJSON(a.responseText);console.log(e);var t='<div class="alert alert-danger"><ul class="list-group">';$.each(e,function(a,e){t+='<li class="list-group-item">'+e[0]+"</li>"}),t+="</ul></di>",$("#form-errors").html(t)}else{var e=jQuery.parseJSON(a.responseText);console.log("Error:",e)}}})})});